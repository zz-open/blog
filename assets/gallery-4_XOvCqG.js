const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery-BcEQcoLu.js","assets/app-boVvO3tb.js","assets/app-Cd5cu-vf.css","assets/YunPageHeader.vue_vue_type_script_setup_true_lang-CFbN6BoV.js"])))=>i.map(i=>d[i]);
import{I as D,d as w,o as c,c as v,A as C,k as g,e as h,g as r,a6 as V,am as $,an as B,C as E,q as i,D as K,W as S,a2 as G,ab as O,ac as T,j as Y,i as F,ao as j,m as R,w as f,ad as I,t as L,f as a,b as M,ae as U,af as z,z as N,F as W}from"./app-boVvO3tb.js";import{_ as H}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-CFbN6BoV.js";function q(s){const o=new TextEncoder;return window.crypto.subtle.importKey("raw",o.encode(s),"PBKDF2",!1,["deriveBits","deriveKey"])}function J(s,o){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function Q(){const s=D(),{encrypt:o}=s.value,n=Uint8Array.from(Object.values(o.iv)),e=Uint8Array.from(Object.values(o.salt));return{decrypt:async(l,u)=>{if(!l)return;const d=await q(l),y=await J(d,e),p=Uint8Array.from(u,_=>_.charCodeAt(0)),t=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:n},y,p);return new TextDecoder().decode(t)}}}const X=w({__name:"YunGallery",props:{photos:{}},setup(s){return(o,n)=>{const e=C("VAGallery");return c(),v(e,{photos:o.photos},null,8,["photos"])}}}),Z={key:0,"w-full":"","pt-14":"","pb-10":""},ee={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},te={key:1},oe=w({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(s){const o=s,n=g(""),e=g(""),l=g(!1),{decrypt:u}=Q();async function d(){const p=o.encryptedPhotos;if(p)try{const t=await u(n.value,p);e.value=t||""}catch{l.value=!0}}function y(){e.value="",n.value=""}return(p,t)=>{const _=X;return c(),h("div",null,[e.value?(c(),h("div",te,[i(_,{photos:JSON.parse(e.value)},null,8,["photos"]),r("div",{"w-full":"","text-center":"","mt-8":""},[r("button",{"m-auto":"",class:"btn","font-bold":"",onClick:y}," Encrypt Again ")])])):(c(),h("div",Z,[r("div",ee,[V(r("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:E(l.value&&"border-red"),onInput:t[1]||(t[1]=m=>l.value=!1),onKeyup:B(d,["enter"])},null,34),[[$,n.value]]),r("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:d})])]))])}}}),ne={text:"center",class:"yun-text-light",p:"2"},ae={class:"page-action",text:"center"},se=["title"],re=w({__name:"gallery",setup(s){const o=M(),{t:n}=K(),e=S(),l=G(e);O([T({"@type":"CollectionPage"})]);const u=Y(()=>e.value.photos||[]),y=F().value.addons["valaxy-addon-lightgallery"]?j(()=>R(()=>import("./YunGallery-BcEQcoLu.js"),__vite__mapDeps([0,1,2,3]))):()=>null;return(p,t)=>{const _=I,m=H,x=oe,b=C("RouterView"),k=z,A=N;return c(),h(W,null,[i(k,null,{default:f(()=>[i(_),i(b,null,{default:f(({Component:P})=>[(c(),v(U(P),null,{"main-header":f(()=>[i(m,{title:a(l)||a(n)("title.gallery"),icon:a(e).icon||"i-ri-gallery-line",color:a(e).color,"page-title-class":a(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":f(()=>[r("div",ne,L(a(n)("counter.photos",u.value.length)),1),r("div",ae,[r("a",{class:"yun-icon-btn",title:a(n)("accessibility.back"),onClick:t[0]||(t[0]=()=>a(o).back())},t[1]||(t[1]=[r("div",{"i-ri-arrow-go-back-line":""},null,-1)]),8,se)]),a(e).encryptedPhotos?(c(),v(x,{key:0,"encrypted-photos":a(e).encryptedPhotos},null,8,["encrypted-photos"])):(c(),v(a(y),{key:1,photos:u.value},null,8,["photos"])),i(b)]),_:2},1024))]),_:1})]),_:1}),i(A)],64)}}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{X as _,ie as g};
